<?php
/**
 * This file is part of Pagaio_Connect for Magento.
 *
 * @license MIT
 * @category Pagaio
 * @package Pagaio_Connect
 * @copyright Copyright (c) 2018 Pagaio (https://pagaio.com/)
 */
/** @var $this Pagaio_Connect_Block_Payment_Info */

$subscription = $this->getSubscription();
$payment = $this->getPagaioPayment();
$contract = $this->helper('pagaio_connect/subscription')->getContract($subscription);
?>

<div style="text-align: center;">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 33" height="50">
        <defs>
            <linearGradient id="a" x1="50.021%" x2="50.021%" y1="-6.745%" y2="99.944%">
                <stop stop-color="#00D5FF" offset="0%"/>
                <stop stop-color="#3671E1" offset="100%"/>
            </linearGradient>
            <linearGradient id="b" x1="49.861%" x2="49.861%" y1="-64.96%" y2="118.867%">
                <stop stop-color="#00D5FF" offset="0%"/>
                <stop stop-color="#3671E1" offset="100%"/>
            </linearGradient>
            <linearGradient id="c" x1="50.061%" x2="50.061%" y1="-98.93%" y2="181.025%">
                <stop stop-color="#00D5FF" offset="0%"/>
                <stop stop-color="#3671E1" offset="100%"/>
            </linearGradient>
            <linearGradient id="d" x1="49.977%" x2="49.977%" y1="-56.458%" y2="103.586%">
                <stop stop-color="#00D5FF" offset="0%"/>
                <stop stop-color="#3671E1" offset="100%"/>
            </linearGradient>
            <linearGradient id="e" x1="50.123%" x2="50.123%" y1="-98.93%" y2="181.025%">
                <stop stop-color="#00D5FF" offset="0%"/>
                <stop stop-color="#3671E1" offset="100%"/>
            </linearGradient>
            <linearGradient id="f" x1="50.02%" x2="50.02%" y1="-98.97%" y2="181.042%">
                <stop stop-color="#00D5FF" offset="0%"/>
                <stop stop-color="#3671E1" offset="100%"/>
            </linearGradient>
            <linearGradient id="g" x1="49.84%" x2="49.84%" y1="-99.161%" y2="181.12%">
                <stop stop-color="#00D5FF" offset="0%"/>
                <stop stop-color="#3671E1" offset="100%"/>
            </linearGradient>
            <linearGradient id="h" x1="49.828%" x2="49.828%" y1="-278.18%" y2="844.022%">
                <stop stop-color="#00D5FF" offset="0%"/>
                <stop stop-color="#3671E1" offset="100%"/>
            </linearGradient>
        </defs>
        <path fill="url(#a)" d="M10 11.8C10.6 11.8 11 11.4 11 10.8 11 10.2 10.6 9.7 10 9.7 9.4 9.7 8.9 10.2 8.9 10.8 8.9 11.4 9.4 11.8 10 11.8ZM20.1 5.3C18 3 15 1.8 11 1.8 9 1.8 7.4 1.4 6.4 1 5.3 0.6 4.7 0.2 4.7 0.2 4.3-0.1 3.8 0 3.6 0.4 3.3 0.7 3.4 1.2 3.8 1.5 3.8 1.5 4.6 2 5.9 2.5 6.3 2.7 6.4 3.2 6 3.5 3.5 5.3 1.9 8.4 1.9 11.9 1.9 11.9 1.9 11.9 1.9 11.9 0.7 13.9 0.1 16.2 0.1 18.6L0.1 32.2C0.1 32.6 0.4 33 0.9 33 2.3 33 3.6 32.8 4.9 32.4 4.9 32.3 4.9 32.3 5 32.3 9.8 30.8 13.5 26.5 14.2 21.3 16.7 20.3 18.8 18 19.7 15L22 15C22.3 15 22.7 14.7 22.7 14.3 22.8 14.1 23.3 8.9 20.1 5.3ZM12.7 19.6L12.7 19.6C12.7 19.9 12.5 20.2 12.1 20.3 11.8 20.3 11.4 20.3 11 20.3 8.1 20.3 5.5 18.4 4.3 15.7 3.4 13.7 3.9 11.4 5.5 10 7.2 8.3 9.5 7.2 11.9 6.9 12.3 6.9 12.7 7.2 12.7 7.6L12.7 19.6 12.7 19.6ZM5.5 28.7L5.5 23.3C5.5 22.9 5.1 22.5 4.7 22.5 4.3 22.5 3.9 22.8 3.9 23.3L3.9 30.1C3.9 30.7 3.5 31.1 3 31.2 3 31.2 3 31.2 3 31.2 2.3 31.3 1.7 30.8 1.7 30.1L1.7 18.6C1.7 17.9 1.7 17.1 1.9 16.4 2 15.9 2.6 15.9 2.8 16.3 4.3 19.6 7.4 21.9 11 21.9 11.3 21.9 11.5 21.9 11.8 21.9 12.1 21.9 12.4 22.2 12.3 22.5 11.6 25.5 9.7 28 7.1 29.6 6.4 30 5.5 29.5 5.5 28.7ZM14.3 18.3L14.3 15.7C14.3 15.3 14.6 15 15 15L16.9 15C17.5 15 17.8 15.6 17.6 16.1 17 17.2 16.2 18.1 15.3 18.8 14.9 19.2 14.3 18.9 14.3 18.3ZM20.4 13.4L16.1 13.4C15.1 13.4 14.3 12.6 14.3 11.6L14.3 6C14.3 5.6 13.9 5.2 13.5 5.2 10.3 5.2 7.3 6.4 5 8.2 4.7 8.5 4.2 8.1 4.4 7.7 5.7 5.2 8.2 3.4 11 3.4 14.5 3.4 17.1 4.4 18.9 6.3 20.7 8.3 21.1 11 21.2 12.6 21.2 13.1 20.9 13.4 20.4 13.4Z"/>
        <path fill="url(#b)" d="M33.7 10.2C32.8 10.3 32 10.5 31.2 10.8 31 10.9 30.7 10.8 30.7 10.5L30.7 10.5C30.7 10.4 30.6 10.2 30.4 10.2L27.9 10.2C27.8 10.2 27.6 10.4 27.6 10.5L27.6 28.9C27.6 29.2 27.8 29.3 28 29.3L30.3 29.3C30.6 29.3 30.8 29.2 30.8 28.9L30.8 22.6C30.8 22.3 31.1 22.1 31.3 22.2 32.1 22.6 33 22.8 33.9 22.8 37.5 22.8 40.4 19.8 40.2 16.2 40 12.8 37.1 10.1 33.7 10.2ZM33.9 19.6C32.1 19.6 30.7 18.2 30.7 16.5 30.7 14.8 32.2 13.4 33.9 13.4 35.6 13.4 37 14.8 37 16.5 37 18.2 35.6 19.6 33.9 19.6Z"/>
        <path fill="url(#c)" d="M50.4 10.8C49.6 10.5 48.8 10.3 47.9 10.2 44.5 10.1 41.6 12.8 41.4 16.2 41.3 19.8 44.1 22.8 47.7 22.8 48.7 22.8 49.6 22.6 50.4 22.2 50.6 22.1 50.8 22.2 50.8 22.5L50.8 22.5C50.8 22.6 51 22.8 51.2 22.8L53.7 22.8C53.8 22.8 54 22.6 54 22.5L54 10.6C54 10.4 53.8 10.2 53.7 10.2L51.2 10.2C51 10.2 50.8 10.4 50.8 10.6L50.8 10.6C50.9 10.8 50.6 10.9 50.4 10.8ZM47.7 19.6C46 19.6 44.6 18.2 44.6 16.5 44.6 14.8 46 13.4 47.7 13.4 49.4 13.4 50.8 14.8 50.8 16.5 50.8 18.2 49.4 19.6 47.7 19.6Z"/>
        <path fill="url(#d)" d="M64.2 10.8C63.5 10.5 62.6 10.3 61.7 10.2 58.3 10.1 55.4 12.8 55.3 16.3 55.1 19.8 58 22.8 61.5 22.8 63.2 22.8 64.6 24.1 64.7 25.7 64.8 27.6 63.3 29 61.5 29 59.8 29 58.4 27.6 58.4 25.8L58.4 25.8C58.4 25.6 58.3 25.5 58.1 25.5L55.6 25.5C55.4 25.5 55.3 25.6 55.3 25.8L55.3 25.8C55.3 29.3 58.2 32.2 61.7 32.2 65.1 32.1 67.8 29.3 67.8 25.9 67.8 24.2 67.1 22.6 65.9 21.4 65.8 21.3 65.8 21.1 65.9 21 67.1 19.8 67.8 18.2 67.8 16.5L67.8 10.5C67.8 10.3 67.7 10.2 67.5 10.2L65 10.2C64.8 10.2 64.7 10.3 64.7 10.5L64.7 10.5C64.7 10.8 64.4 10.9 64.2 10.8ZM61.6 13.4C63.3 13.4 64.7 14.8 64.7 16.5 64.7 18.2 63.3 19.6 61.6 19.6 59.8 19.6 58.4 18.2 58.4 16.5 58.4 14.8 59.8 13.4 61.6 13.4Z"/>
        <path fill="url(#e)" d="M78.1 10.8C77.3 10.5 76.4 10.3 75.6 10.2 72.2 10.1 69.3 12.8 69.1 16.2 68.9 19.8 71.8 22.8 75.4 22.8 76.3 22.8 77.2 22.6 78.1 22.2 78.3 22.1 78.5 22.2 78.5 22.5L78.5 22.5C78.5 22.6 78.7 22.8 78.8 22.8L81.3 22.8C81.5 22.8 81.6 22.6 81.6 22.5L81.6 10.6C81.6 10.4 81.5 10.2 81.3 10.2L78.8 10.2C78.7 10.2 78.5 10.4 78.5 10.6L78.5 10.6C78.5 10.8 78.3 10.9 78.1 10.8ZM75.4 19.6C73.7 19.6 72.3 18.2 72.3 16.5 72.3 14.8 73.7 13.4 75.4 13.4 77.1 13.4 78.5 14.8 78.5 16.5 78.5 18.2 77.1 19.6 75.4 19.6Z"/>
        <path fill="url(#f)" d="M93.6 10.2C90.2 10.2 87.4 13 87.4 16.5 87.4 20 90.2 22.8 93.6 22.8 97.1 22.8 99.9 20 99.9 16.5 99.9 13 97.1 10.2 93.6 10.2ZM93.6 19.6C91.9 19.6 90.5 18.2 90.5 16.5 90.5 14.8 91.9 13.4 93.6 13.4 95.4 13.4 96.8 14.8 96.8 16.5 96.8 18.2 95.4 19.6 93.6 19.6Z"/>
        <path fill="url(#g)" d="M83.3 22.8L85.8 22.8C85.9 22.8 86.1 22.6 86.1 22.5L86.1 10.6C86.1 10.4 85.9 10.2 85.8 10.2L83.3 10.2C83.1 10.2 83 10.4 83 10.6L83 22.5C82.9 22.6 83.1 22.8 83.3 22.8Z"/>
        <path fill="url(#h)" d="M84.5 6.5C83.7 6.5 83 7.2 83 8.1 83 9 83.7 9.7 84.5 9.7 85.4 9.7 86.1 9 86.1 8.1 86.1 7.2 85.4 6.5 84.5 6.5Z"/>
    </svg>
    <?php switch ($payment['data']['attributes']['type']) {
        case 'stripe': ?>
            <img src="<?php echo $this->getSkinUrl('images/pagaio/stripe.png'); ?>" alt="Stripe" height="50" />
            <?php break;
        case 'GoCardLess': ?>
            <img src="<?php echo $this->getSkinUrl('images/pagaio/sepa.png'); ?>" alt="SEPA" height="40" style="height:40px;" />
            <?php break;
    } ?>
</div>

<ul>
    <li>Abonnement lié à la commande : <a target="_blank" href="<?php echo $this->helper('pagaio_connect')->getAppLink($subscription['data']['links']['self']); ?>"><?php echo $this->getSubscriptionId(); ?></a></li>
    <li>Statut : <span class="pagaio-status__<?php echo $subscription['data']['attributes']['status']; ?>"><?php echo $subscription['data']['attributes']['status']; ?></span></li>
    <li><a target="_blank" href="<?php echo $this->getPaymentPageUrl(); ?>">Accéder à la page de paiement</a></li>
</ul>

<?php echo $this->getChildHtml()?>
